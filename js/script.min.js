$(document).ready(function(){var config={},hotel=data.hotel,hostel=data.hostel,house=data.house,motel=data.motel,searchInput=document.getElementById("searchInput"),searchButton=document.getElementById("searchButton"),thumbnailsBox=document.getElementById("thumbnailsBox"),thumbnailImg=document.getElementsByClassName("image-ctnr"),thumbnailTitle=document.getElementsByClassName("thumbnail-title"),thumbnailDistance=document.getElementsByClassName("distance-number"),thumbnailField=document.getElementsByClassName("skiarea-txt"),thumbnailPrice=document.getElementsByClassName("price-number"),thumbnailStars=document.getElementsByClassName("star-ctnr"),modalImg=document.getElementsByClassName("modal-img"),modalTitle=document.getElementsByClassName("modal-title"),modalDistance=document.getElementsByClassName("modal-distance")[0],modalField=document.getElementsByClassName("modal-skiarea-txt"),modalPrice=document.getElementsByClassName("modal-price"),modalStars=document.getElementsByClassName("star-ctnr-modal")[0],modalDescription=document.getElementsByClassName("modal-dscptn")[0],modalFeatures=document.getElementsByClassName("ft-flex")[0],modalCheckInCtnr=document.getElementsByClassName("check-in-ctnr")[0],modalCheckOutCtnr=document.getElementsByClassName("check-out-ctnr")[0],modalInputCtnr=document.getElementsByClassName("form-flex")[0],modalAdultCtnr=document.getElementsByClassName("adult-input-ctnr")[0],modalChildCtnr=document.getElementsByClassName("child-input-ctnr")[0],warningDiv=document.getElementsByClassName("input-warning"),modalNameCtnr=document.getElementsByClassName("name-ctnr")[0],modalEmailCtnr=document.getElementsByClassName("email-ctnr")[0],modalExtrasCtnr=document.getElementsByClassName("txt-extras")[0],checkInInput=document.getElementsByClassName("check-in"),checkOutInput=document.getElementsByClassName("check-out"),confirmBtn=document.getElementsByClassName("confirm-trigger")[0],bookingDates={},bookingData={},spanTotalNights=document.getElementById("totalNights"),spanTotalAdults=document.getElementById("totalAdults"),spanTotalChildren=document.getElementById("totalChildren"),spanBreakfastOpt=document.getElementById("breakfastOpt"),spanTotalCost=document.getElementById("priceTotal");function search(){var t=searchInput.value.toUpperCase();"QUEENSTOWN"==t||"WANAKA"==t||"CADRONA"==t||"REMARKABLES"==t||"THE REMARKABLES"==t||"THE REMARKS"==t||"CORONET PEAK"==t?(loadThumbnails(locations.queenstown),initMap(168.697751,45.026377)):"CHRISTCHURCH"==t||"CANTERBURY"==t||"MT HUTT"==t||"MOUNT HUTT"==t||"TEMPLE BASIN"==t||"ARTHUR'S PASS"==t||"CHEESEMAN"==t||"PORTERS"==t||"MT OLYMPUS"==t||"MOUNT OLYMPUS"==t||"BROKEN RIVER"==t?(loadThumbnails(locations.christchurch),initMap(172.493273,43.538478)):"WHAKAPAPA"==t||"RUAPEHU"==t||"MOUNT RUAPEHU"==t||"MT RUAPEHU"==t||"TONGARIRO"==t||"OHAKUNE"==t||"NATIONAL PARK"==t||"TUROA"==t?(loadThumbnails(locations.whakapapa),initMap(175.549994,39.231289)):thumbnailsBox.innerHTML='<span class="no-results">No location matched your search, please check your spelling and try again. Hint: Try searching by field name or nearest town, Eg. Queenstown.</span>'}function loadThumbnails(t){thumbnailsBox.innerHTML='<div id="thumbnailAnchor"></div>';for(var e=document.getElementById("thumbnailAnchor"),a=0;a<t.length;a++){var n=document.createElement("div");n.setAttribute("class","thumbnail-ctnr"),n.innerHTML='<div class="image-ctnr"></div><div class="centre-el-ctnr"><div class="thumbnail-title"></div><div class="txt-distance"><span class="distance-number"></span>km from <span class="skiarea-txt"></span> ski area</div><div class="star-ctnr"></div><button class="btn btn-modal view-details"  data-toggle="modal" data-target="#details">view details</button></div><div class="txt-price"><div>$<span class="price-number"></span> NZD</div><div>/ night</div></div><div class="btn-map"><i class="fas fa-map-marker-alt"></i></div>',e.after(n),writeThumbnails(a,t),setDetailButton(a,t)}}function writeThumbnails(t,e){thumbnailImg[0].innerHTML=e[t].img,thumbnailTitle[0].innerHTML=e[t].title,thumbnailDistance[0].innerHTML=e[t].distance,thumbnailField[0].innerHTML=e[t].field,thumbnailPrice[0].innerHTML=e[t].price;for(var a=0;a<e[t].stars;a++)thumbnailStars[0].innerHTML+=elements.stars[t]}function setDetailButton(t,e){document.getElementsByClassName("view-details")[0].addEventListener("click",function(){writeModal(t,e)},!1)}function writeModal(t,e){modalImg[0].innerHTML=e[t].img,modalTitle[0].innerHTML=e[t].title,modalDistance.innerHTML=e[t].distance,modalField[0].innerHTML=e[t].field,modalPrice[0].innerHTML=e[t].price,modalDescription.innerHTML=e[t].description,modalFeatures.innerHTML="";for(var a=0;a<e[t].features.length;a++)modalFeatures.innerHTML+=e[t].features[a];modalStars.innerHTML="";for(var n=0;n<e[t].stars;n++)modalStars.innerHTML+=elements.stars[t];setBookingButton(t,e)}function setBookingButton(t,e){document.getElementsByClassName("book-now")[0].addEventListener("click",function(){setUpBooking(t,e)},!1)}function setUpBooking(arrayNo,getLocation){modalTitle[1].innerHTML=getLocation[arrayNo].title,modalImg[1].innerHTML=getLocation[arrayNo].img,modalPrice[1].innerHTML=getLocation[arrayNo].price,modalCheckInCtnr.innerHTML='<input type="text" class="check-in" required>',modalCheckOutCtnr.innerHTML='<input type="text" class="check-out" required readonly>',checkInInput[0].classList.add("datepicker"+getLocation[arrayNo].type+"In"),checkOutInput[0].classList.add("datepicker"+getLocation[arrayNo].type+"Out"),initDatePickers(),modalInputCtnr.setAttribute("class","form-flex"),modalAdultCtnr.innerHTML='<input type="number" class="inputAdult">',modalChildCtnr.innerHTML='<input type="number" class="inputChild">',warningDiv[0].innerHTML=null,modalInputCtnr.classList.add("EL-class");var elElement=document.getElementsByClassName("EL-class")[0],accomodationShortcut=eval(getLocation[arrayNo].type),max=accomodationShortcut.maxCapacity,min=accomodationShortcut.minCapacity;elElement.addEventListener("mouseleave",function(){inputValidation(max,min)},!1),modalNameCtnr.innerHTML='<input type="text" class="input-name" required>',modalEmailCtnr.innerHTML='<input type="email" class="input-email" required>';var nameInput=document.getElementsByClassName("input-name")[0],emailInput=document.getElementsByClassName("input-email")[0];warningDiv[1].innerHTML=null,emailInput.addEventListener("mouseleave",function(){emailValidation(emailInput)},!1),modalExtrasCtnr.innerHTML="",bookingData.breakfast=!1;for(var i=0;i<getLocation[arrayNo].features.length;i++)if('<div class="iconTxt-wrapper"><img src="images/icons/meal.svg" alt="meal svg test"><div class="icon-title">meals</div></div>'===getLocation[arrayNo].features[i]){modalExtrasCtnr.innerHTML='<input type="checkbox" class="breakfast-option"> Include breakfast <span class="green"> + $10.00 NZD</span>';var breakfastInput=document.getElementsByClassName("breakfast-option")[0];confirmBtn.addEventListener("click",function(){breakfastBoolean(breakfastInput)},!1)}confirmBtn.addEventListener("click",function(){confirmForm(emailInput,nameInput,arrayNo,getLocation)},!1)}function initDatePickers(){$(".datepickerhotelIn").pickadate({format:"d/m/yyyy",min:1,onSet:function(t){var e=t.select,a=new Date(e);if("Invalid Date"!=a){var n=a.getDate(),i=a.getMonth(),o=a.getFullYear();bookingDates.checkInDate=e,$(".datepickerhotelOut").pickadate({format:"d/m/yyyy",disable:[!0,["inverted"],{from:new Date(o,i,n+1),to:hotel.maxNights-1}],onSet:function(t){bookingDates.checkOutDate=t.select}})}}}),$(".datepickerhostelIn").pickadate({format:"d/m/yyyy",min:1,onSet:function(t){var e=t.select,a=new Date(e);if("Invalid Date"!=a){var n=a.getDate(),i=a.getMonth(),o=a.getFullYear();bookingDates.checkInDate=e,$(".datepickerhostelOut").pickadate({format:"d/m/yyyy",disable:[!0,["inverted"],{from:new Date(o,i,n+1),to:hostel.maxNights-1}],onSet:function(t){bookingDates.checkOutDate=t.select}})}}}),$(".datepickermotelIn").pickadate({format:"d/m/yyyy",min:1,onSet:function(t){var e=t.select,a=new Date(e);if("Invalid Date"!=a){var n=a.getDate(),i=a.getMonth(),o=a.getFullYear();bookingDates.checkInDate=e,$(".datepickermotelOut").pickadate({format:"d/m/yyyy",disable:[!0,["inverted"],{from:new Date(o,i,n+3),to:motel.maxNights-3}],onSet:function(t){bookingDates.checkOutDate=t.select}})}}}),$(".datepickerhouseIn").pickadate({format:"d/m/yyyy",min:1,onSet:function(t){var e=t.select,a=new Date(e);if("Invalid Date"!=a){var n=a.getDate(),i=a.getMonth(),o=a.getFullYear();bookingDates.checkInDate=e,$(".datepickerhouseOut").pickadate({format:"d/m/yyyy",disable:[!0,["inverted"],{from:new Date(o,i,n+2),to:house.maxNights-2}],onSet:function(t){bookingDates.checkOutDate=t.select}})}}})}function inputValidation(t,e){var a,n=parseInt(document.getElementsByClassName("inputAdult")[0].value),i=parseInt(document.getElementsByClassName("inputChild")[0].value),o=(i=i||0)+(n=n||0);o>t?(warningDiv[0].innerHTML='<i class="fas fa-exclamation-triangle"></i> Maximum group number is '+t+" persons",a=!1):o<e?(warningDiv[0].innerHTML='<i class="fas fa-exclamation-triangle"></i> Group must be atleast '+e+" person(s)",a=!1):0===n?(warningDiv[0].innerHTML='<i class="fas fa-exclamation-triangle"></i> Group must contain atleast one adult',a=!1):(warningDiv[0].innerHTML=null,a=!0,bookingData.totalAdults=n,bookingData.totalChildren=i),config.logic=a}function emailValidation(t){t.validity.valid?warningDiv[1].innerHTML=null:warningDiv[1].innerHTML='<i class="fas fa-exclamation-triangle"></i> Please enter a valid email'}function confirmForm(t,e,a,n){var i=config.logic;t.validity.valid&&e.validity.valid&&i&&checkOutInput[0].value&&checkInInput[0].value?(confirmBtn.setAttribute("data-toggle","modal"),confirmBtn.setAttribute("data-target","#confirmation"),confirmBtn.setAttribute("data-dismiss","modal"),confirmBtn.setAttribute("aria-label","Close"),bookingData.arrayNumber=a,calcualteStayDuration(),calculateData(a,n)):!1===t.validity.valid&&e.validity.valid&&i&&checkOutInput[0].value&&checkInInput[0].value?(confirmBtn.removeAttribute("data-toggle"),confirmBtn.removeAttribute("data-target"),confirmBtn.removeAttribute("data-dismiss"),confirmBtn.removeAttribute("aria-label"),warningDiv[1].innerHTML='<i class="fas fa-exclamation-triangle"></i> Please enter a valid email'):(confirmBtn.removeAttribute("data-toggle"),confirmBtn.removeAttribute("data-target"),confirmBtn.removeAttribute("data-dismiss"),confirmBtn.removeAttribute("aria-label"),warningDiv[1].innerHTML='<i class="fas fa-exclamation-triangle"></i> Please complete all fields')}function calcualteStayDuration(){var t=bookingDates.checkOutDate-bookingDates.checkInDate,e=Math.floor(t/864e5);bookingData.stayDuration=e}function breakfastBoolean(t){!0===t.checked&&(bookingData.breakfast=!0)}function calculateData(t,e){if(!0===bookingData.breakfast)var a=10;else a=0;displayData((bookingData.totalAdults+bookingData.totalChildren)*bookingData.stayDuration*e[t].price+(bookingData.totalAdults+bookingData.totalChildren)*bookingData.stayDuration*a,e)}function displayData(t,e){var a=bookingData.arrayNumber;modalTitle[2].innerHTML=e[a].title,modalImg[2].innerHTML=e[a].img,spanTotalNights.textContent=bookingData.stayDuration,spanTotalAdults.textContent=bookingData.totalAdults,spanTotalChildren.textContent=bookingData.totalChildren,modalPrice[2].textContent=e[a].price,modalPrice[3].textContent=e[a].price,bookingData.breakfast?spanBreakfastOpt.textContent="+ $10 breakfast per person":spanBreakfastOpt.textContent=null,spanTotalCost.textContent=t}function animations(){$(".search-bar").click(function(){$(".footer").fadeOut(300)}),$("#searchButton").click(function(){$(".backdrop").addClass("backdrop-on"),$(".header").addClass("header-p2"),$(".top-content").addClass("tc-p2"),$(".search-bar").addClass("sb-p2"),$(".flavour-text").hide(),$(".header").removeClass("header-index"),$(".top-content").removeClass("tc-index"),$(".search-bar").removeClass("sb-index")}),$("#filtreToggle").click(function(){$(".opts-fltr-ctnr").toggleClass("fltr-shut"),$(".dropdown").toggleClass("dropup")}),$("#reserve-btn").click(function(){$(".confirmation-txt").show(500),$(this).addClass("green-btn"),$(this).text("reserved")}),$("#confirmation").on("hidden.bs.modal",function(){$(".confirmation-txt").hide(500),$("#reserve-btn").removeClass("green-btn"),$("#reserve-btn").text("reserve")})}function initMap(t,e){mapboxgl.accessToken="pk.eyJ1IjoiaXpzaSIsImEiOiJjamkzbjQxMWQwMGFzM2tvNDM5NTB6cmlrIn0.a5L-XDDBNFQ-0BrqtQpNCg";new mapboxgl.Map({container:"map",style:"mapbox://styles/mapbox/streets-v9",center:[t,-e],zoom:11});$(".btn-map").click(function(){$("#map").addClass("map-on"),$(".btn-map").addClass("v-active"),$(".vl").removeClass("v-active"),$(".list-view").addClass("lv-translate")}),$(".vl").click(function(){$("#map").removeClass("map-on"),$(".btn-map").removeClass("v-active"),$(".vl").addClass("v-active"),$(".list-view").removeClass("lv-translate")})}searchButton.addEventListener("click",search,!1),animations()});
